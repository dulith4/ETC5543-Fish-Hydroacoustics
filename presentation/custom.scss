/* ====== Base (unchanged feel) ====== */
:root{ --r-main-font-size:36px; --r-block-margin:12px; --r-heading2-size:1.55em; }

/* === Deck-wide background image (single source of truth) === */
body.reveal-viewport { background: transparent !important; }
.reveal { position: relative; }

/* fixed image behind everything */
.reveal::before{
  content:"";
  position: fixed;
  inset: 0;
  z-index: 0;
  background: url("media/bg-deck.png") center / cover no-repeat fixed;
  opacity: 1;
  pointer-events: none;
}

/* keep slide content above the deck image */
.reveal .slides{ position: relative; z-index: 1; }

/* ---- The actual fix: remove Reveal's per-slide white panels ---- */
/* 1) Kill the generated slide-background layer (that white sheet) */
.reveal .backgrounds .slide-background{
  background: transparent !important;
  background-color: transparent !important;
  box-shadow: none !important;
}

/* 2) Make section elements themselves transparent too */
.reveal .slides > section,
.reveal .slides > section > section{
  background: transparent !important;
  background-color: transparent !important;
  box-shadow: none !important;
}

/* 3) Allow any slide you mark with `.white` to be plain white again */
.reveal .slides section.white{
  background: #ffffff !important;
}


/* ======================================================= */
/* Everything below is your original styling unchanged     */
/* ======================================================= */

.reveal p,.reveal li{ line-height:1.28 !important; }
.reveal ul{ margin:.4em 0 .6em !important; }
.reveal li{ margin-bottom:.25em !important; }
.reveal h2{ font-size:var(--r-heading2-size) !important; margin-bottom:.45em !important; line-height:1.15 !important; }
.reveal .columns{ gap:1.2rem; align-items:center; } .reveal .column{ padding:0 .5rem; }
.reveal .quarto-figure{ margin:0 !important; }
.reveal code,.reveal .code{ font-size:.9em !important; }
.reveal .quarto-figure .caption{ font-size:.85em !important; }

/* Utilities for headings/body size */
.reveal section.h2-smaller h2{ font-size:1.35em !important; }

/* Enlarge ALL body text on a slide that uses {.larger} */
.reveal section.larger { 
  font-size: 1.18em !important;    /* bump body copy */
}
.reveal section.larger li { 
  margin-bottom: .3em !important;  /* keep list spacing tidy */
}

/* Optional: make only a small block bigger (use ::: {.larger-inline} ... :::) */
.reveal .larger-inline {
  font-size: 1.15em !important;
  line-height: 1.3 !important;
}

.reveal section.table-smaller{ font-size:.90em !important; }   /* slide-level */

 /* ====== TABLE FITTING (high specificity) ====== */
/* Add htmltable_class = "fit-table" in kable_styling() — already in your chunks */
.reveal section table.fit-table{
  font-size: .74em !important;            /* stronger downsize */
  max-width: 92vw !important;             /* never overflow slide */
  margin-left: auto !important;
  margin-right: auto !important;
  table-layout: auto;
  border-collapse: collapse !important;
}

/* tight cells */
.reveal section table.fit-table th,
.reveal section table.fit-table td{
  padding: .14em .46em !important;
  line-height: 1.12 !important;
  vertical-align: middle !important;
  white-space: nowrap;                     /* keep numbers on one line */
}

/* first (label) column can wrap if needed */
.reveal section table.fit-table th:first-child,
.reveal section table.fit-table td:first-child{
  white-space: normal !important;
}

/* smaller caption */
.reveal section table.fit-table caption{
  caption-side: top;
  font-size: .85em !important;
  margin-bottom: .25rem !important;
  text-align: left;
}

/* ====== Optional per-slide scale (nuclear option if still big) ====== */
/* Add {.table-scale-85} to the slide heading to scale the table block only */
.reveal section.table-scale-85 table.fit-table{
  transform: scale(.85);
  transform-origin: top center;
  display: inline-block;                   /* keep table’s width from affecting layout */
}
.reveal section.table-scale-80 table.fit-table{
  transform: scale(.80);
  transform-origin: top center;
  display: inline-block;
}

/* --- Column content: kill stray margins around <p><img/></p> and center --- */
.reveal .columns { display:flex; align-items:center; gap:1.2rem; }
.reveal .column { padding:0 .5rem; }

/* vcenter utility (works even if something is taller) */
.reveal section .vcenter { align-items: center !important; }

/* Remove default paragraph margins that push images down */
.reveal .column p:has(> img) { margin: 0 !important; }

/* Make images fill their column neatly */
.media-fit {
  display:block;
  margin: 0 auto !important;        /* horizontally center inside column */
  width: 100% !important;           /* use the column width */
  height: auto !important;          /* keep aspect ratio */
  max-height: 64vh;                 /* don’t overgrow the slide */
  object-fit: contain;              /* no cropping */
}

/* Slightly raise body text size just for slides that ask for it */
.reveal section.raise-text { font-size: 1.10em !important; }
.reveal section.raise-text p,
.reveal section.raise-text li { font-size: 1em !important; }

/* Keep your existing table sizing untouched */

/* Give the columns enough height so v-centering is visible */
.reveal section .vh-balance { min-height: 62vh; }

/* Keep the image large and within the slide */
.media-fit { max-height: 72vh; }

/* Push the media to the right edge of its column */
.align-right { margin-left: auto !important; margin-right: 0 !important; }

/* Give the row some height so vertical centering has room */
.reveal section .vh-balance { min-height: 60vh; }

/* Right column = flex box, push content to the right edge */
.reveal .column.media-right{
  display:flex;
  justify-content:flex-end;        /* <- push to right */
  align-items:center;              /* vertical center */
}

/* Quarto wraps images in <p> — kill its margins */
.reveal .column.media-right p { margin: 0 !important; }

/* Stop Quarto’s default figure centering */
.reveal .quarto-figure { text-align: left !important; }

/* Make the GIF big but safe on the slide */
.media-fit{
  display:block;
  margin: 0 !important;            /* no auto-centering */
  max-height: 72vh;                /* grow vertically */
  height: auto;
  width: auto;                     /* keep native aspect; don’t force 100% width */
  object-fit: contain;
}

/* Slightly bigger body copy on this slide (you already added .raise-text) */
.reveal section.raise-text { font-size: 1.10em !important; }

/* Give the row enough height so vertical centering shows */
.reveal section .vh-balance { min-height: 60vh; }

/* Right column: push content to the right, center vertically */
.reveal .column.media-right{
  display:flex;
  justify-content:flex-end;   /* shove to right edge */
  align-items:center;         /* vertical center */
}

/* Quarto wraps images in <p> — remove its margins */
.reveal .column.media-right p { margin: 0 !important; }

/* Stop figure centering Quarto injects */
.reveal .quarto-figure { text-align: left !important; }

/* Make the GIF big but safe */
.media-fit{
  display:block;
  margin: 0 !important;
  height: auto;
  width: auto;                /* don’t force 100% width */
  max-height: 72vh;           /* scale primarily by height */
  object-fit: contain;
}

/* Slightly larger body text for slides that opt in */
.reveal section.raise-text { font-size: 1.10em !important; }

/* --- Right-pinned figure utility (scoped to slides with .right-figure) --- */
.reveal section.right-figure { position: relative; }

.reveal section.right-figure img.abs-img{
  position: absolute;
  right: 4vw;
  top: 12vh;           /* tweak to taste */
  max-width: 40vw;     /* keep clear of the bullets */
  max-height: 52vh;    /* avoid pushing the list */
  width: auto; height: auto;
  object-fit: contain;
  margin: 0 !important;
  pointer-events: none;
}

/* tighten vertical spacing on that slide */
.reveal section.right-figure h2{ margin-bottom: .15em !important; }
.reveal section.right-figure .slide-body{ margin-top: 0 !important; }

/* ===== Splash quote: single source of truth ===== */
.reveal .splash-quote{
  /* layout & placement */
  display:flex !important;
  align-items:center !important;
  justify-content:center !important;
  text-align:center !important;

  height:68vh !important;
  max-width:88vw !important;
  margin:6vh auto 0 !important;
  padding:2.6rem 3.2rem !important;
  border-radius:30px !important;

  /* look */
  background:
    radial-gradient(1100px 540px at 30% 20%, rgba(255,255,255,.08), transparent 60%),
    radial-gradient(900px 700px at 70% 70%, rgba(255,255,255,.06), transparent 60%),
    linear-gradient(180deg, #0f2d43 0%, #092536 100%) !important;
  box-shadow:0 22px 46px rgba(0,0,0,.28) !important;
  color:#fff !important;
}

/* kill Reveal’s default blockquote styling inside the card */
.reveal .splash-quote blockquote{
  all:unset !important;      /* removes border-left, margins, padding */
  display:block !important;
  width:100% !important;
  text-align:center !important;
}
.reveal .splash-quote blockquote p{ margin:0 !important; }

/* big headline + attribution */
.reveal .splash-quote .q{
  display:block;
  font-weight:900;
  line-height:1.18;
  letter-spacing:.2px;
  font-size:clamp(40px, 5.2vw, 72px) !important;
  text-shadow:0 2px 8px rgba(0,0,0,.28);
  color:#fff !important;
}
.reveal .splash-quote .attr{
  display:block;
  margin-top:1rem;
  font-style:italic;
  font-size:clamp(18px, 2.2vw, 28px) !important;
  text-shadow:0 1px 6px rgba(0,0,0,.28);
  color:#fff !important;
}

/* === Handle case where Quarto emits <blockquote class="splash-quote"> === */
.reveal blockquote.splash-quote{
  /* remove Reveal’s default blockquote look */
  border: 0 !important;
  padding: 0 !important;

  /* apply the same card styling you use for the DIV case */
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  text-align: center !important;

  height: 68vh !important;
  max-width: 88vw !important;
  margin: 6vh auto 0 !important;
  padding: 2.6rem 3.2rem !important;
  border-radius: 30px !important;

  background:
    radial-gradient(1100px 540px at 30% 20%, rgba(255,255,255,.08), transparent 60%),
    radial-gradient(900px 700px at 70% 70%, rgba(255,255,255,.06), transparent 60%),
    linear-gradient(180deg, #0f2d43 0%, #092536 100%) !important;
  box-shadow: 0 22px 46px rgba(0,0,0,.28) !important;
  color: #fff !important;
}

/* remove extra spacing Quarto might wrap inside the blockquote */
.reveal blockquote.splash-quote p{
  margin: 0 !important;
}

/* Final quote slide: style the blockquote on the slide that has .center */
.reveal section.center blockquote{
  /* wipe Reveal's default bar & spacing */
  all: unset !important;

  /* card layout */
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  text-align: center !important;

  /* size & placement */
  height: 68vh !important;
  max-width: 88vw !important;
  margin: 6vh auto 0 !important;
  padding: 2.6rem 3.2rem !important;
  border-radius: 30px !important;

  /* deep-water look */
  background:
    radial-gradient(1100px 540px at 30% 20%, rgba(255,255,255,.08), transparent 60%),
    radial-gradient(900px 700px at 70% 70%, rgba(255,255,255,.06), transparent 60%),
    linear-gradient(180deg, #0f2d43 0%, #092536 100%) !important;
  box-shadow: 0 22px 46px rgba(0,0,0,.28) !important;
  color: #fff !important;
}

/* remove extra spacing Quarto may wrap inside */
.reveal section.center blockquote p{ margin: 0 !important; }

/* headline + attribution inside the card */
.reveal section.center .q{
  display: block;
  font-weight: 900;
  line-height: 1.18;
  letter-spacing: .2px;
  font-size: clamp(40px, 5.2vw, 72px) !important;
  text-shadow: 0 2px 8px rgba(0,0,0,.28);
  color: #fff !important;
}
.reveal section.center .attr{
  display: block;
  margin-top: 1rem;
  font-style: italic;
  font-size: clamp(18px, 2.2vw, 28px) !important;
  text-shadow: 0 1px 6px rgba(0,0,0,.28);
  color: #fff !important;
}

/* (final-card / hero / closing blocks unchanged — omitted to keep this short) */

/* Only the 'Future Work' slide */
.reveal section.bigger-future{ font-size:1.35em !important; }              /* bumps all body text */
.reveal section.bigger-future h2{ font-size:2.2em !important; line-height:1.08 !important; }
.reveal section.bigger-future li{ margin-bottom:.45em !important; }        /* keep bullets airy */

